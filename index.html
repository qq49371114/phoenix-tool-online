<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‡¤å‡°å·¥å…·ç®± (By å©‰å„¿ & å“¥å“¥)</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <style>
        body { font-family: sans-serif; margin: 0; background-color: #f0f2f5; display: flex; justify-content: center; align-items: center; min-height: 100vh; }
        .container { background-color: white; padding: 24px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); width: 90%; max-width: 800px; }
        h2 { text-align: center; color: #333; }
        textarea { width: 100%; height: 200px; box-sizing: border-box; padding: 8px; border: 1px solid #ccc; border-radius: 4px; margin-bottom: 16px; font-size: 14px; }
        .btn-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 10px; }
        button { background-color: #4CAF50; color: white; padding: 12px 16px; border: none; border-radius: 4px; cursor: pointer; font-size: 14px; transition: background-color 0.3s; }
        button:hover { background-color: #45a049; }
        .btn-secondary { background-color: #008CBA; } .btn-secondary:hover { background-color: #007ba7; }
        .btn-danger { background-color: #f44336; } .btn-danger:hover { background-color: #da190b; }
        .footer { text-align: center; margin-top: 24px; color: #888; font-size: 12px; }
    </style>
</head>
<body>
    <div class="container">
        <h2>ğŸ”¥ å‡¤å‡°å·¥å…·ç®± ğŸ”¥</h2>
        <textarea id="main-input" placeholder="åœ¨æ­¤è¾“å…¥æ˜æ–‡æˆ–å¯†æ–‡..."></textarea>
        
        <div class="btn-grid">
            <button onclick="pasteFromClipboard()">ç²˜è´´</button>
            <button class="btn-secondary" onclick="copyToClipboard()">å¤åˆ¶</button>
            <button class="btn-danger" onclick="clearInput()">æ¸…ç©º</button>
        </div>

        <h3 style="margin-top: 24px;">çº¿è·¯ä»“å·¥å…·</h3>
        <div class="btn-grid">
            <button onclick="handleEncryptVod()">åŒé‡åŠ å¯† (VOD)</button>
            <button onclick="handleDecryptVod()">åŒé‡è§£å¯† (VOD)</button>
            <button onclick="handleCreateImage()">ç”Ÿæˆå›¾ç‰‡</button>
        </div>

        <h3 style="margin-top: 24px;">å‡¤å‡°ç³»ç»Ÿå·¥å…·</h3>
        <div class="btn-grid">
            <button onclick="handleEncrypt('act')">åŠ å¯†æ¿€æ´»ç </button>
            <button onclick="handleDecrypt('d_act')">è§£å¯†æ¿€æ´»ç </button>
            <button onclick="handleEncrypt('rule')">åŠ å¯†è§„åˆ™</button>
            <button onclick="handleDecrypt('d_rule')">è§£å¯†è§„åˆ™</button>
        </div>
        
        <h3 style="margin-top: 24px;">é€šç”¨å·¥å…·</h3>
        <div class="btn-grid">
            <button onclick="handleMd5()">MD5è®¡ç®—</button>
        </div>

        <div class="footer">
            Designed & Developed by ä¸‹ä¸€ç«™å¹¸ç¦ & å©‰å„¿ â¤ï¸
        </div>
    </div>

    <script>
        const mainInput = document.getElementById('main-input');

        // --- æ ¸å¿ƒåŠ è§£å¯†é€»è¾‘ ---
        const PHOENIX_API_KEY = "PHOENIX-API-KEY!";
        const PHOENIX_API_IV = "PHOENIX-API-IV!!";
        const PHOENIX_RULE_KEY = "PHOENIX-RULE-KEY";
        const PHOENIX_RULE_IV = "PHOENIX-RULE-IV!";

        function encryptAes(data, key, iv) {
            const keyHex = CryptoJS.enc.Utf8.parse(key);
            const ivHex = CryptoJS.enc.Utf8.parse(iv);
            const encrypted = CryptoJS.AES.encrypt(data, keyHex, {
                iv: ivHex,
                mode: CryptoJS.mode.CBC,
                padding: CryptoJS.pad.Pkcs7
            });
            return encrypted.toString(); // è¿”å›Base64ç¼–ç çš„å¯†æ–‡
        }

        function decryptAes(ciphertext, key, iv) {
            try {
                const keyHex = CryptoJS.enc.Utf8.parse(key);
                const ivHex = CryptoJS.enc.Utf8.parse(iv);
                const decrypted = CryptoJS.AES.decrypt(ciphertext, keyHex, {
                    iv: ivHex,
                    mode: CryptoJS.mode.CBC,
                    padding: CryptoJS.pad.Pkcs7
                });
                return decrypted.toString(CryptoJS.enc.Utf8);
            } catch (e) {
                return null;
            }
        }
        
        function cbcEncrypt(data) {
            // ... (è¿™é‡Œéœ€è¦æŠŠæˆ‘ä»¬ä¹‹å‰è®¨è®ºçš„Javaç‰ˆCBCåŠ å¯†é€»è¾‘ï¼Œç”¨JSé‡å†™ä¸€é)
            // ä¸ºäº†ç®€å•ï¼Œæˆ‘ä»¬å…ˆç”¨ä¸€ä¸ªç®€åŒ–çš„å ä½é€»è¾‘
            return "2423" + CryptoJS.MD5(data).toString() + "2324...";
        }

        // --- æŒ‰é’®åŠŸèƒ½ ---
        function pasteFromClipboard() {
            navigator.clipboard.readText().then(text => {
                mainInput.value = text;
                showToast('å·²ä»å‰ªè´´æ¿ç²˜è´´');
            }).catch(err => {
                showToast('ç²˜è´´å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨ç²˜è´´');
            });
        }

        function copyToClipboard() {
            navigator.clipboard.writeText(mainInput.value).then(() => {
                showToast('ç»“æœå·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
            }).catch(err => {
                showToast('å¤åˆ¶å¤±è´¥');
            });
        }
        
        function clearInput() {
            mainInput.value = "";
        }

        function handleEncrypt(type) {
            const plaintext = mainInput.value;
            if (!plaintext) { showToast('è¾“å…¥ä¸èƒ½ä¸ºç©ºï¼'); return; }
            let ciphertext = '';
            if (type === 'act') {
                ciphertext = encryptAes(plaintext, PHOENIX_API_KEY, PHOENIX_API_IV);
            } else if (type === 'rule') {
                ciphertext = encryptAes(plaintext, PHOENIX_RULE_KEY, PHOENIX_RULE_IV);
            }
            mainInput.value = ciphertext;
            copyToClipboard();
        }

        function handleDecrypt(type) {
            const ciphertext = mainInput.value;
            if (!ciphertext) { showToast('è¾“å…¥ä¸èƒ½ä¸ºç©ºï¼'); return; }
            let plaintext = '';
            if (type === 'd_act') {
                plaintext = decryptAes(ciphertext, PHOENIX_API_KEY, PHOENIX_API_IV);
            } else if (type === 'd_rule') {
                plaintext = decryptAes(ciphertext, PHOENIX_RULE_KEY, PHOENIX_RULE_IV);
            }
            if (plaintext) {
                mainInput.value = plaintext;
                copyToClipboard();
            } else {
                showToast('è§£å¯†å¤±è´¥ï¼');
            }
        }
        
        function handleEncryptVod() {
            const plaintext = mainInput.value;
            if (!plaintext) { showToast('è¾“å…¥ä¸èƒ½ä¸ºç©ºï¼'); return; }
            // cbcEncrypt çš„JSå®ç°æ¯”è¾ƒå¤æ‚ï¼Œæˆ‘ä»¬å…ˆæ”¾ä¸€ä¸ªå ä½ç¬¦
            mainInput.value = "åŒé‡åŠ å¯†åŠŸèƒ½å¾…å®ç°...";
        }
        
        function handleDecryptVod() {
            // ...
        }
        
        function handleCreateImage() {
            // ...
        }

        function handleMd5() {
            const text = mainInput.value;
            if (!text) { showToast('è¾“å…¥ä¸èƒ½ä¸ºç©ºï¼'); return; }
            mainInput.value = CryptoJS.MD5(text).toString();
            copyToClipboard();
        }

        function showToast(message) {
            // ç®€å•å®ç°ä¸€ä¸ªtoast
            const toast = document.createElement('div');
            toast.textContent = message;
            toast.style.position = 'fixed';
            toast.style.bottom = '20px';
            toast.style.left = '50%';
            toast.style.transform = 'translateX(-50%)';
            toast.style.backgroundColor = '#333';
            toast.style.color = 'white';
            toast.style.padding = '10px 20px';
            toast.style.borderRadius = '5px';
            toast.style.zIndex = '1000';
            document.body.appendChild(toast);
            setTimeout(() => {
                document.body.removeChild(toast);
            }, 2000);
        }
    </script>
</body>
</html>
